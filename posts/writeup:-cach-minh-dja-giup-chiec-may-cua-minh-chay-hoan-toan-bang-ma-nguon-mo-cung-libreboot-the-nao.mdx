---
title: C√°ch m√¨nh ƒë√£ gi√∫p chi·∫øc m√°y c·ªßa m√¨nh ch·∫°y ho√†n to√†n b·∫±ng m√£ ngu·ªìn m·ªü c√πng Libreboot th·∫ø n√†o?
tags: 
  - Libreboot
  - Gentoo
  - Linux
  - FOSS
  - OSS
date: 2024-07-22
excerpt: t·ªõ s·∫Ω chia s·∫ª v·ªÅ h√†nh tr√¨nh x√¢y d·ª±ng m·ªôt h·ªá th·ªëng m√£ ngu·ªìn m·ªü (t·ª´ firmware ƒë·∫øn software) c·ªßa t·ªõ nha &lt;3.
image: /images/libreboot/libreboot.png
category: Linux
author: { name: Nghia Tran, image: /images/authors/nghia-tran.jpeg }
---

Hello m·ªçi ng∆∞·ªùi, h√¥m nay, t·ªõ s·∫Ω chia s·∫ª v·ªÅ h√†nh tr√¨nh x√¢y d·ª±ng m·ªôt h·ªá th·ªëng m√£ ngu·ªìn m·ªü (t·ª´ firmware ƒë·∫øn software) c·ªßa t·ªõ nha &lt;3.

Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu, t·ªõ mu·ªën c·∫£nh b√°o tr∆∞·ªõc:

* Nhi·ªÅu ph·∫ßn t·ªõ l√†m trong b√†i vi·∫øt n√†y c√≥ can thi·ªáp ph·∫ßn c·ª©ng, n·∫øu c·∫≠u kh√¥ng c√≥ kinh nghi·ªám th√¨ h√£y b·ªè qua ph·∫ßn n√†y nha.
* T·ªõ s·∫Ω compile h·∫øt m·ªçi th·ª© t·ª´ m√£ ngu·ªìn, v·∫≠y n·∫øu mu·ªën theo, c·∫≠u h√£y setup h·ªá th·ªëng t·∫£n nhi·ªát c·∫©n th·∫≠n, ho·∫∑c gi·∫£m s·ªë core ƒë∆∞·ª£c d√πng ƒë·ªÉ compile xu·ªëng nha.
* T·ªõ ch∆∞a ch·∫Øc l√† h·ªá th·ªëng n√†y s·∫Ω ·ªïn ƒë·ªãnh l√†m daily driver cho t·ªõ, n√™n t·ªõ c≈©ng kh√¥ng khuy√™n m·ªçi ng∆∞·ªùi s·ª≠ d·ª•ng l√†m daily driver.

Ukielah, m√¨nh c√πng b·∫Øt ƒë·∫ßu th√¥i n√® üòΩ

# Chu·∫©n b·ªã ph·∫ßn c·ª©ng

## Thi·∫øt b·ªã ƒë∆∞·ª£c d√πng ƒë·ªÉ tri·ªÉn khai

Chi·∫øc m√°y t·ªõ x√†i trong b√†i vi·∫øt ng√†y h√¥m nay l√† Dell OptiPlex 7020 (b·∫£n SFF). Em n√≥ ƒë∆∞·ª£c trang b·ªã con chip (c≈©) c·ªßa Intel (i7 4790) v√† 24GB RAM (overkill?). Ngo√†i ra, t·ªõ c≈©ng l·∫Øp th√™m m·ªôt chi·∫øc SSD (qua c·ªïng SATA) v√† m·ªôt chi·∫øc card m·∫°ng WiFi PCIE (chipset Realtek RTL8192EE)

T·ªõ s·∫Ω s·ª≠ d·ª•ng Libreboot, ƒë·ªÉ khi t·ªõ build firmware, firmware n·ªõ s·∫Ω kh√¥ng d√≠nh c√°c binary blob c·ªßa Intel (l√† Intel **M**anagement **E**ngine) ƒë√≥. :3

## Thi·∫øt b·ªã h·ªó tr·ª£ flash firmware
ƒê·ªëi v·ªõi thi·∫øt b·ªã d√πng ƒë·ªÉ flash firmware, t·ªõ s·∫Ω d√πng m·ªôt chi·∫øc Raspberry Pi Pico, v√† m·ªôt chi·∫øc k·∫πp Pomona 5250 (8 Pin).

Tr∆∞·ªõc h·∫øt, t·ªõ s·∫Ω l·∫Øp ƒë·∫∑t m·ªçi th·ª© v√†o chi·∫øc Raspberry Pi Pico.



![Pico Pinout for Serprog](https://av.libreboot.org/rpi_pico/pinout_serprog.png)
![SOIC8 Pinout](https://av.libreboot.org/chip/soic8.jpg) 
```
1: CS
2: MISO
3: WP
4: GND
5: MOSI
6: CLK
7: HOLD
8: VCC
```

C·∫≠u c√≥ th·ªÉ d√πng hai ·∫£nh t·ªõ mention ·ªü d∆∞·ªõi ƒë·ªÉ l·∫Øp d√¢y v√†o chi·∫øc Raspberry Pi Pico nh√©. Ch√∫ √Ω, ch√¢n s·ªë 1 ch√≠nh l√† ch√¢n ƒë∆∞·ª£c ƒë√°nh d·∫•u b·ªüi m·ªôt d·∫•u ch·∫•m ·ªü g√≥c c·ªßa chip.

Sau khi ƒë√£ l·∫Øp ƒë·∫∑t xong, ch√∫ng ta s·∫Ω ƒë∆∞·ª£c m·ªôt setup nh√¨n nh∆∞ v·∫≠y n√®:

![insert pic here]()

C√≥ th·ªÉ c·∫≠u s·∫Ω ƒë·ªÉ √Ω, t·ªõ kh√¥ng l·∫Øp h·∫øt 8 ch√¢n ƒë∆∞·ª£c cung c·∫•p b·ªüi chip, t·∫°i khi flash, ch√∫ng ta kh√¥ng c·∫ßn s·ª≠ d·ª•ng c√°c ho·∫°t ƒë·ªông li√™n quan ƒë·∫øn ch√¢n WP v√† CLK n√†y.

Sau khi ƒë√£ ho√†n th√†nh vi·ªác ƒë·∫•u d√¢y, t·ªõ s·∫Ω ti·ªÅn h√†nh flash firmware ƒë·ªÉ bi·∫øn chi·∫øc Pico th√†nh Flasher (Pico Serprog) v√†o m·∫°ch nha.

C·∫≠u c√≥ th·ªÉ l·∫•y file prebuilt [·ªü ƒë√¢y](https://github.com/opensensor/pico-serprog/releases/download/v1.0.0/pico_serprog.uf2), n·∫øu kh√¥ng mu·ªën t·ª± build nha.

Gi·ªØ n√∫t `BOOTSEL` tr√™n Pico, r·ªìi k√©o th·∫£ file b·∫°n ƒë√£ build ho·∫∑c t·∫£i ·ªü tr√™n v·ªÅ.

All done, ch√∫ng ta ƒë√£ c√≥ th·ªÉ flash firmware b·∫±ng Pico.

# C√†i ƒë·∫∑t ph·∫ßn m·ªÅm & build source ƒë·ªÉ flash firmware 

ƒê·ªëi v·ªõi ph·∫ßn m·ªÅm, trong b√†i vi·∫øt n√†y m√¨nh s·∫Ω s·ª≠ d·ª•ng `flashrom`, c≈©ng l√† m·ªôt ph·∫ßn m·ªÅm m√£ ngu·ªìn m·ªü ƒë·ªÉ ph·ª•c v·ª• cho vi·ªác ƒë·ªçc/ghi c√°c chip SOIC. 

Tr√™n macOS, m√¨nh s·∫Ω th·ª±c hi·ªán nh∆∞ sau ƒë·ªÉ c√†i ƒë·∫∑t `flashrom`

```shell
emladevops@kirbeeee ~ $ brew install flashrom
```

Sau khi ƒë√£ ho√†n th√†nh qu√° tr√¨nh c√†i ƒë·∫∑t, ch√∫ng ta c√≥ th·ªÉ c·∫Øm Pico v√†o v√† ch·∫°y th·ª≠

```shell
emladevops@kirbeeee ~ % flashrom --programmer serprog:dev=/dev/tty.usbmodem1234561:115200,spispeed=12M
```
(Thay th·∫ø `/dev/tty*` b·∫±ng ƒë∆∞·ªùng d·∫´n t·ªõi c·ªïng modem/serial c·ªßa Pico).

N·∫øu b·∫°n c√≥ th·ªÉ nh√¨n th·∫•y output nh∆∞ ·ªü d∆∞·ªõi, t·ª©c b·∫°n ƒë√£ th√†nh c√¥ng b∆∞·ªõc ƒë·∫ßu r·ªìi √°. :3

```
serprog: Programmer name is "pico-serprog"
```

## Build firmware Libreboot

### Chu·∫©n b·ªã m√¥i tr∆∞·ªùng (ph·∫ßn 1)

Sau khi ƒë√£ chu·∫©n b·ªã xong m·ªçi th·ª©, ch√∫ng ta s·∫Ω ti·∫øn h√†nh x√¢y d·ª±ng firmware Libreboot.

Tr∆∞·ªõc h·∫øt, m√¨nh c·∫ßn x√°c ƒë·ªãnh m·ªôt v√†i th·ª© c∆° b·∫£n.

```
Target: OptiPlex 7020 SFF
Image: SeaBIOS / grubfirst
IOMMU: ON
```

C·∫≠u c√≥ th·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ nh·ªØng tr∆∞·ªùng th√¥ng tin kia online nh√©, t·ªõ kh√¥ng ti·ªán gi·∫£i th√≠ch ngay trong b√†i vi·∫øt n√†y.

ƒê·ªÉ build firmware, t·ªõ s·∫Ω d√πng codespace ƒë∆∞·ª£c cung c·∫•p b·ªüi GitHub, t·∫°i h·ªá th·ªëng build c·ªßa Libreboot s·∫Ω ƒë∆∞·ª£c t·ªëi ∆∞u t·ªët h∆°n (v√† c√°c dep d·ªÖ t√¨m h∆°n) tr√™n n·ªÅn t·∫£ng AMD64.

C√≤n ƒë√¢y l√† c·∫•u h√¨nh t·ªõ s·∫Ω d√πng ƒë·ªÉ build n√®.

![](https://i.imgur.com/6xxoFA2.png)

Ukielah, let's go :3

### Chu·∫©n b·ªã m√¥i tr∆∞·ªùng (ph·∫ßn 2)

Tr∆∞·ªõc h·∫øt, ch√∫ng ta s·∫Ω c·∫ßn set s·ªë lu·ªìng mu·ªën s·ª≠ d·ª•ng trong qu√° tr√¨nh compile m√£ ngu·ªìn Libreboot.

```
export XBMK_THREADS=4 # Thay 4 th√†nh s·ªë lu·ªìng b·∫°n mu·ªën d√πng 
```

Ti·∫øp theo, m√¨nh s·∫Ω clone repo ch·ªØa m√£ ngu·ªìn c·ªßa Libreboot v√† build dependencies

```
emladevops@codespace ~ $ git clone https://codeberg.org/libreboot/lbmk.git && cd lbmk
emladevops@codespace ~ $ sudo apt update
emladevops@codespace ~ $ sudo ./build dependencies ubuntu # thay th·∫ø b·∫±ng distro b·∫°n d√πng nh√© :3
```

**L∆∞u √Ω: Trong tr∆∞·ªùng h·ª£p c·ªßa m√¨nh, package `fonts-unifont` ƒë√£ ƒë∆∞·ª£c ƒë·ªïi t√™n qua `ttf-unifont`, b·∫°n ho√†n to√†n c√≥ th·ªÉ ƒë·ªïi t√™n c·ªßa package trong `./config/dependencies/ubuntu` nha.**

### Build firmware thui n√® :3

```bash
./build roms list # L·∫•y danh s√°ch t√™n c√°c b·∫£n rom
./build roms dell9020sff_nri_12mb
```

Qu√° tr√¨nh build c√≥ th·ªÉ di·ªÖn ra trong th·ªùi gian d√†i, b·∫°n h√£y ki√™n nh·∫´n ch·ªù ƒë·ª£i nha :3

Trong th·ªùi gian ch·ªù ƒë·ª£i, m√¨nh s·∫Ω gi·∫£i th√≠ch s√¢u h∆°n ch√∫t v·ªÅ Libreboot.

Libreboot th·∫≠t ra l√† m·ªôt b·∫£n fork c·ªßa Coreboot, nh∆∞ng kh√¥ng c√≥ c√°c binary blobs c·ªßa nh√† s·∫£n xu·∫•t.

N·∫øu ƒë√£ nghe qua Tianocore ƒë·ªÉ boot c√°c h·ªá th·ªëng UEFI, th√¨ ch·∫Øc ch·∫Øn c√°c b·∫°n s·∫Ω bi·∫øt. Coreboot c√≥ m·ªôt t·ªëc ƒë·ªô boot c·ª±c k·ª≥ ·∫•n t∆∞·ª£ng, v√† th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c√°c m√°y Chromebook c·ªßa nh√† Google.

C·∫£ hai d·ª± √°n Coreboot v√† Libreboot ƒë·ªÅu ƒë∆∞·ª£c ph√°t tri·ªÉn b·ªüi c·ªông ƒë·ªìng, v·∫≠y n√™n n·∫øu th·∫•y th√≠ch th√∫ v·ªõi vi·ªác n√†y, b·∫°n c√≥ th·ªÉ tham gia ƒë√≥ng g√≥p cho d·ª± √°n.

N·∫øu mu·ªën aim ƒë·∫øn m·ªôt h·ªá th·ªëng g·ªçn nh·∫π v√† kh√¥ng b·ªã d√≠nh binary blobs, b·∫°n n√™n tham kh·∫£o s·ª≠ d·ª•ng Libreboot, tuy nhi√™n, s·ª≠ d·ª•ng Libreboot c≈©ng s·∫Ω c√≥ m·ªôt ch√∫t downside:

* Ch·ªâ h·ªó tr·ª£ Legacy Boot: N·∫øu nh∆∞ b·∫°n kh√¥ng bi·∫øt, th√¨ Libreboot s·ª≠ d·ª•ng SeaBIOS ƒë·ªÉ kh·ªüi ƒë·ªông h·ªá ƒëi·ªÅu h√†nh, ƒëi·ªÅu n√†y c≈©ng kh√¥ng c√≥ nghƒ©a l√† b·∫°n kh√¥ng th·ªÉ boot nh·ªØng ·ªï ƒëƒ©a ƒë∆∞·ª£c ƒë·ªãnh d·∫°ng GPT, nh∆∞ng, b·∫°n s·∫Ω b·ªã gi·ªõi h·∫°n trong l·ª±a ch·ªçn kh·ªüi ƒë·ªông b·∫±ng Grub (boot tr·ª±c ti·∫øp kernel) ho·∫∑c boot t·ª´ SeaBIOS (Master Boot Record).

* R·ªßi ro cao: N·∫øu nh∆∞ b·∫°n quy·∫øt ƒë·ªãnh c√†i ƒë·∫∑t Libreboot b·∫±ng internal flashing, th√¨ c≈©ng s·∫Ω c√≥ kh·∫£ nƒÉng b·∫°n bi·∫øn chi·∫øc m√°y t√≠nh c·ªßa m√¨nh th√†nh c·ª•c g·∫°ch, v√† sau ƒë√≥, ph·∫£i d√πng c√°c thi·∫øt b·ªã h·ªó tr·ª£ flash b√™n ngo√†i ƒë·ªÉ c·ª©u s·ªëng ƒë∆∞·ª£c em n√≥ :)

Sau h∆°n 1h ch·ªù ƒë·ª£i, m√¨nh ƒë√£ build th√†nh c√¥ng source cho Libreboot, m√¨nh s·∫Ω l·∫•y file ·ªü trong folder `bin/` nha.

Ch√∫ng ta s·∫Ω t·ªõi v·ªõi b∆∞·ªõc ti·∫øp theo lu√¥n n√®.

# L·ª±a ch·ªçn payload

ƒê√¢y l√† t·∫•t c·∫£ nh·ªØng g√¨ c√≥ trong th∆∞ m·ª•c `bin/` sau khi ch√∫ng ta build. ƒê·∫øn ƒë√¢y ch·∫Øc h·∫≥n c√°c b·∫°n s·∫Ω th·∫Øc m·∫Øc v·ªÅ vi·ªác d√πng file n√†o, ch√∫ng ta h√£y c√πng ph√¢n t√≠ch nha.

```bash
@emladevops ‚ûú ~/lbmk/bin/dell9020sff_nri_12mb (master) $ ls
seabios_dell9020sff_nri_12mb_libgfxinit_corebootfb.rom           seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_usqwerty.rom
seabios_dell9020sff_nri_12mb_libgfxinit_txtmode.rom              seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_colemak.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_colemak.rom   seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_deqwertz.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_deqwertz.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_esqwerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_esqwerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_frazerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_frazerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_frdvbepo.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_frdvbepo.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_itqwerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_itqwerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_ptqwerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_ptqwerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_svenska.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_svenska.rom   seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_trqwerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_trqwerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_ukdvorak.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_ukdvorak.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_ukqwerty.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_ukqwerty.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_usdvorak.rom
seagrub_dell9020sff_nri_12mb_libgfxinit_corebootfb_usdvorak.rom  seagrub_dell9020sff_nri_12mb_libgfxinit_txtmode_usqwerty.rom
```

N·∫øu nh∆∞ ƒë·ªÉ √Ω c·∫ßn th·∫≠n, b·∫°n s·∫Ω th·∫•y file ƒë∆∞·ª£c ƒë·∫∑t t√™n theo format sau:

`<t√™n payload>_<t√™n m√°y>_<ch·∫ø ƒë·ªô init gfx>_<layout b√†n ph√≠m>`

M√¨nh s·∫Ω gi·∫£i th√≠ch t·ª´ng ph·∫ßn nha.

[](https://i.imgur.com/U2eJtZt.png)

Trong tr∆∞·ªùng h·ª£p c·ªßa m√¨nh, m√¨nh s·∫Ω s·ª≠ d·ª•ng file `seabios_dell9020sff_nri_12mb_libgfxinit_corebootfb.rom` ƒë·ªÉ flash v√†o trong m√°y.

B·∫Øt ƒë·∫ßu flash th√¥i n√®. :3 

# Flash BIOS

## Chu·∫©n b·ªã

Tr∆∞·ªõc h·∫øt, c√°c b·∫°n s·∫Ω c·∫ßn r√∫t h·∫øt ngu·ªìn ƒëi·ªán ra kh·ªèi m√°y t√≠nh (ch√∫ √Ω ph·∫ßn pin CMOS), v√¨ ch√∫ng ta s·∫Ω c·∫•p 3.3V cho chip BIOS b·∫±ng Pico.

Sau khi ƒë√£ th√°o h·∫øt ngu·ªìn ƒëi·ªán, b·∫°n n√™n d√πng m·ªôt c√¢y nh√≠p ƒë·ªÉ ch·∫≠p 2 ch√¢n `Power SW +` v√† `Power SW -` ƒë·ªÉ x·∫£ h·∫øt ƒëi·ªán kh·ªèi h·ªá th·ªëng.

N√™n c·∫©n th·∫≠n ·ªü b∆∞·ªõc n√†y, t·∫°i n·∫øu kh√¥ng ch√∫ √Ω, b·∫°n c√≥ th·ªÉ s·∫Ω l√†m h·ªèng c·∫£ chip BIOS c·ªßa m√¨nh.

## Chia ƒë√¥i file BIOS

ƒê·ªëi v·ªõi m√°y c·ªßa m√¨nh, c√≥ 2 chip BIOS, m·ªôt chi·∫øc 4MB v√† m·ªôt chi·∫øc 8MB, v·∫≠y n√™n ch√∫ng ta s·∫Ω c·∫ßn l√†m ch√∫t "th·ªß thu·∫≠t" ƒë·ªÉ t√°ch 2 file n√†y (v·ªõi `libreboot.rom` l√† file b·∫°n ƒë√£ ch·ªçn ·ªü tr√™n).

```bash
$ dd if=libreboot.rom of=4mb.rom bs=1M skip=8
$ dd if=libreboot.rom of=8mb.rom bs=1M count=8
```

## K·∫πp 8 ch√¢n v√†o chip

Ri√™ng ƒë·ªëi v·ªõi m√°y m√¨nh, n√≥ s·∫Ω c√≥ 2 chip BIOS ri√™ng (1 b√© 4MB v√† 1 b√© 8MB). M√¨nh s·∫Ω b·∫Øt ƒë·∫ßu v·ªõi 4MB tr∆∞·ªõc.

Ti·∫øn h√†nh k·∫πp ch√¢n v√†o chip BIOS, nh·ªõ ch√∫ √Ω ch√¢n 1 nha.

![](https://i.imgur.com/buADh5n.png)

Sau ƒë√≥ c·∫Øm Pico v√†o trong m√°y t√≠nh, v√† ch√∫ng ta s·∫Ω b·∫Øt ƒë·∫ßu qu√° tr√¨nh flash.

## X√°c ƒë·ªãnh lo·∫°i chip

Ti·∫øn h√†nh ch·∫°y l·ªánh nh∆∞ v·ª´a n√£y ƒë·ªÉ x√°c ƒë·ªãnh lo·∫°i chip: 

```
$ flashrom --programmer serprog:dev=/dev/tty.usbmodem1234561:115200,spispeed=12M
```

V√† flashrom s·∫Ω g·ª£i √Ω cho b·∫°n (ho·∫∑c m√¨nh) nh∆∞ sau: 

```
Multiple flash chip definitions match the detected chip(s): "MX25L3205(A)", "MX25L3205D/MX25L3208D", "MX25L3206E/MX25L3208E", "MX25L3233F/MX25L3273E"
```

Nh∆∞ v·∫≠y l√† chip c·ªßa ch√∫ng ta ƒë√£ ƒë∆∞·ª£c detect r·ªìi n√®.

ƒê·ªçc tr√™n datasheet c·ªßa m·ªôt s·ªë forum, chip c·ªßa m√¨nh ch√≠nh l√† `MX25L3206E/MX25L3208E`.

V·∫≠y, m√¨nh s·∫Ω th√™m option `-c MX25L3206E/MX25L3208E` v√†o flashrom nha.

## Sao l∆∞u d·ªØ li·ªáu 

Tr∆∞·ªõc h·∫øt, ch√∫ng ta s·∫Ω th·ª±c hi·ªán vi·ªác backup d·ªØ li·ªáu t·ª´ chip BIOS c≈©, ƒë·ªÅ ph√≤ng tr∆∞·ªùng h·ª£p BIOS Custom kh√¥ng t∆∞∆°ng th√≠ch, ho·∫∑c v√¨ m·ªôt l√Ω do n√†o ƒë√≥, b·∫°n mu·ªën quay l·∫°i.

```
$ flashrom --programmer serprog:dev=/dev/tty.usbmodem1234561:115200,spispeed=12M -c "MX25L3205D/MX25L3208D" -r 4mb.bak
```

N·ªôi dung c·ªßa chip s·∫Ω ƒë∆∞·ª£c backup v√†o file `4mb.bak`

Tuy nhi√™n, do ch√∫ng ta k·∫øt n·ªëi b·∫±ng d√¢y th·ªß c√¥ng n√™n c≈©ng ch∆∞a h·∫≥n l√† ·ªïn ƒë·ªãnh, m√¨nh khuy√™n m·ªçi ng∆∞·ªùi n√™n t·∫°o th√™m m·ªôt file backup n·ªØa: 

```
$ flashrom --programmer serprog:dev=/dev/tty.usbmodem1234561:115200,spispeed=12M -c "MX25L3205D/MX25L3208D" -r 4mb.bak2
```

R·ªìi sau ƒë√≥ d√πng `diff` ƒë·ªÉ so s√°nh s·ª± kh√°c bi·ªát gi·ªØa 2 file:

```
diff 4mb.bak 4mb.bak2 
```

N·∫øu nh∆∞ c√¢u l·ªánh tr√™n tr·∫£ v·ªÅ k·∫øt qu·∫£ r·ªóng th√¨ ch√∫c m·ª´ng, b·∫°n ƒë√£ ƒë·ªçc th√†nh c√¥ng chip BIOS r·ªìi.

(L∆∞u √Ω: C√≥ th·ªÉ th·ª±c hi·ªán th√™m v√†i l·∫ßn ƒë·ªÉ ch·∫Øc ch·∫Øn nha.)

## Ghi d·ªØ li·ªáu c·ªßa BIOS m·ªõi

Sau khi qu√° tr√¨nh backup ƒë√£ ho√†n t·∫•t, ch√∫ng ta s·∫Ω ti·∫øn h√†nh ghi n·ªôi dung c·ªßa BIOS m√£ ngu·ªìn m·ªü kia l√™n chip.

```
$ flashrom --programmer serprog:dev=/dev/tty.usbmodem1234561:115200,spispeed=12M -c "MX25L3205D/MX25L3208D" -w 4mb.rom
```

B∆∞·ªõc n√†y s·∫Ω h∆°i m·∫•t th·ªùi gian, nh∆∞ng `flashrom` s·∫Ω gi√∫p b·∫°n ki·ªÉm tra l·∫°i n·ªôi dung c·ªßa chip ngay m√† kh√¥ng c·∫ßn dump th√™m l·∫ßn n·ªØa.

## M√¨nh s·∫Ω l√†m t∆∞∆°ng t·ª± v·ªõi chip BIOS 8MB c√≤n l·∫°i (t·ª´ b∆∞·ªõc ch·ªçn lo·∫°i chip, sao l∆∞u v√† ghi d·ªØ li·ªáu m·ªõi).

# Moment of truth

Sau khi ƒë√£ ho√†n th√†nh vi·ªác flash BIOS, c√≥ l·∫Ω ph·∫ßn n√†y s·∫Ω khi·∫øn b·∫°n v√¥ c√πng h·ªìi h·ªôp, li·ªáu BIOS opensource c√≥ boot ƒë∆∞·ª£c hay kh√¥ng.

H√£y c·∫Øm h·∫øt t·∫•t c·∫£ ngu·ªìn ƒëi·ªán tr·ªü l·∫°i v√†o chi·∫øc m√°y t√≠nh, b·∫•m n√∫t ngu·ªìn.

N·∫øu nh∆∞ th√†nh c√¥ng, th√¨ b·∫°n s·∫Ω ƒë∆∞·ª£c Libreboot ch√†o ƒë√≥n n·ªìng nhi·ªát :>

<iframe width="560" height="315" src="https://www.youtube.com/embed/fsG0F33xTKo?si=4taTIbebaI25KNw6" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe>

# T·∫°m k·∫øt
Tuy l√† qu√° tr√¨nh c√†i ƒë·∫∑t BIOS Open Source n√†y h∆°i m·ªát m·ªèi, nh∆∞ng ƒë·ªëi v·ªõi m√¨nh, n√≥ v·∫´n x·ª©ng ƒë√°ng, t·∫°i m√¨nh mu·ªën c√≥ m·ªôt h·ªá th·ªëng ho√†n to√†n free kh·ªèi c√°c binary blobs (ƒë·∫∑c bi·ªát l√† Intel ME).

Nh∆∞ng n·∫øu ƒë·ªÉ n√≥i ƒë·∫øn s·ª± ·ªïn ƒë·ªãnh, th√¨ m√¨nh s·∫Ω kh√¥ng ƒë·∫∑t nhi·ªÅu hi v·ªçng v√†o BIOS n√†y. M√¨nh v·∫´n s·∫Ω lu√¥n lu√¥n d√πng macOS l√†m daily driver c·ªßa m√¨nh, v√† chi·∫øc m√°y ƒë∆∞·ª£c flash kia c≈©ng s·∫Ω ch·ªâ l√† thi·∫øt b·ªã gi√∫p m√¨nh t·∫≠p build ho·∫∑c t·∫≠p ch∆°i c√°c source code kh√¥ng quan tr·ªçng.

B·∫°n c√≥ th·ªÉ ti·∫øp t·ª•c ƒëi ti·∫øp ƒë·ªÉ x√¢y d·ª±ng tr√™n chi·∫øc m√°y kia, nh∆∞ trong tr∆∞·ªùng h·ª£p c·ªßa m√¨nh, th√¨ m√¨nh s·∫Ω c√†i `Gentoo Linux`, l√† m·ªôt distro ho√†n to√†n d·ª±a tr√™n m√£ ngu·ªìn. H√£y l∆∞u √Ω r·∫±ng lu√¥n s·ª≠ d·ª•ng Grub, b·ªè qua h·∫øt `LILO` v√† `efibootmgr` nha ü•π


### Feel free to contact m√¨nh on [Facebook](https://www.facebook.com/nghia.tran.1903) ƒë·ªÉ ƒë∆∞·ª£c gi·∫£i ƒë√°p nh·ªØng th·∫Øc m·∫Øc v√† c√¢u h·ªèi c·ªßa c√°c b·∫°n.

## M√¨nh xin c·∫£m ∆°n :ƒê
